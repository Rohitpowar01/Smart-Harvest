<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" type="image/png" href="/assets/img/logo.png" />
  <title>Smart Harvest</title>

  <!-- CSS & Fonts -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-social/5.1.1/bootstrap-social.min.css" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <link href="/assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="/assets/css/nucleo-svg.css" rel="stylesheet" />
  <link rel="stylesheet" href="/assets/css/creativetim.min.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>

  <script>
    function getdistrict(val) {
      $.ajax({
        type: "POST",
        url: "/farmer/get-district",
        data: { state_id: val },
        success: function(data) {
          $("#district-list").html(data);
        }
      });
    }
  </script>
</head>

<body class="bg-white" id="top">
  <%- include('../partials/navbar') %>

  <section class="section section-shaped section-lg">
    <div class="shape shape-style-1 shape-primary">
      <% for (let i = 0; i < 10; i++) { %><span></span><% } %>
    </div>

    <div class="container">
      <div class="row">
        <div class="col-md-8 mx-auto text-center">
          <span class="badge badge-info badge-pill mb-3">Register</span>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-12 mb-3">
          <div class="nav nav-tabs nav-fill bg-gradient-default" role="tablist">
            <a class="nav-item nav-link active font-weight-bold text-warning" data-toggle="tab" href="#nav-home">Farmer Signup</a>
          </div>

          <div class="tab-content py-3 px-3 px-sm-0 bg-gradient-inf">
            <div class="tab-pane fade show active" id="nav-home">
              <div class="card card-body bg-gradient-warning">
                <form action="/farmer/register" method="POST">
                  <% if (typeof error !== 'undefined') { %>
                    <div id="success"><%= error %></div>
                    <script>
                      $("#success").fadeTo(2000, 500).slideUp(500, function() {
                        $("#success").slideUp(500);
                      });
                    </script>
                  <% } %>

                  <!-- Name -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Farmer Name *</label>
                    <div class="col-md-9">
                      <input class="form-control" type="text" name="name" required />
                    </div>
                  </div>

                  <!-- Email -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Email Address *</label>
                    <div class="col-md-9">
                      <input class="form-control" type="email" name="email" required />
                    </div>
                  </div>

                  <!-- Mobile -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Mobile No *</label>
                    <div class="col-md-9">
                      <input class="form-control" type="number" name="mobile" pattern="[6789][0-9]{9}" required />
                    </div>
                  </div>

                  <!-- Gender -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Gender</label>
                    <div class="col-md-9">
                      <select class="form-control" name="gender">
                        <option>Male</option>
                        <option>Female</option>
                      </select>
                    </div>
                  </div>

                  <!-- DOB -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">DOB</label>
                    <div class="col-md-9">
                      <input class="form-control" type="date" name="dob" />
                    </div>
                  </div>

                  <!-- Bank Name -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Bank Name *</label>
                    <div class="col-md-9">
                      <input class="form-control" type="text" name="bank_nm" required />
                    </div>
                  </div>

                  <!-- IFSC -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">IFSC Code *</label>
                    <div class="col-md-9">
                      <input class="form-control" type="text" name="ifsc_cd" required />
                    </div>
                  </div>

                  <!-- Account Number -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Account Number *</label>
                    <div class="col-md-9">
                      <input class="form-control" type="number" name="acct_num" min="10" required />
                    </div>
                  </div>

                  <!-- State -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">State *</label>
                    <div class="col-md-9">
                      <select name="state" id="state" class="form-control" onchange="getdistrict(this.value)">
                        <option value="">Select State</option>
                        <% states.forEach(state => { %>
                          <option value="<%= state.StCode %>"><%= state.StateName %></option>
                        <% }) %>
                      </select>
                    </div>
                  </div>

                  <!-- District -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">District *</label>
                    <div class="col-md-9">
                      <select name="district" id="district-list" class="form-control">
                        <option value="">Select District</option>
                      </select>
                    </div>
                  </div>

                  <!-- City -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">City *</label>
                    <div class="col-md-9">
                      <input class="form-control" type="text" name="city" required />
                    </div>
                  </div>

                  <!-- Password -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Password *</label>
                    <div class="col-md-9">
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><i class="fas fa-lock"></i></span>
                        </div>
                        <input class="form-control" type="password" name="password" id="password" required
                          pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" placeholder="password" />
                        <div class="input-group-append">
                          <span class="input-group-text" onclick="password_show_hide();">
                            <i class="fas fa-eye" id="show_eye"></i>
                            <i class="fas fa-eye-slash d-none" id="hide_eye"></i>
                          </span>
                        </div>
                      </div>
                      <span class="text-white d-block">Use minimum 8 characters with at least 1 numeral, capital letter and special character.</span>
                    </div>
                  </div>

                  <!-- Confirm Password -->
                  <div class="form-group row">
                    <label class="col-md-3 col-form-label text-white">Confirm Password *</label>
                    <div class="col-md-9">
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><i class="fas fa-lock"></i></span>
                        </div>
                        <input class="form-control" type="password" name="confirmpassword" id="cpassword" required
                          pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" placeholder="Confirm password" />
                        <div class="input-group-append">
                          <span class="input-group-text" onclick="password_show_hide2();">
                            <i class="fas fa-eye" id="show_eye2"></i>
                            <i class="fas fa-eye-slash d-none" id="hide_eye2"></i>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Submit -->
                  <div class="form-group row">
                    <div class="col-md-9 offset-md-3">
                      <button type="submit" class="btn btn-success btn-block">Submit</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <%- include('../partials/footer') %>

  <script>
    function password_show_hide() {
      let x = document.getElementById("password");
      let show_eye = document.getElementById("show_eye");
      let hide_eye = document.getElementById("hide_eye");
      hide_eye.classList.remove("d-none");
      if (x.type === "password") {
        x.type = "text";
        show_eye.style.display = "none";
        hide_eye.style.display = "block";
      } else {
        x.type = "password";
        show_eye.style.display = "block";
        hide_eye.style.display = "none";
      }
    }

    function password_show_hide2() {
      let x = document.getElementById("cpassword");
      let show_eye = document.getElementById("show_eye2");
      let hide_eye = document.getElementById("hide_eye2");
      hide_eye.classList.remove("d-none");
      if (x.type === "password") {
        x.type = "text";
        show_eye.style.display = "none";
        hide_eye.style.display = "block";
      } else {
        x.type = "password";
        show_eye.style.display = "block";
        hide_eye.style.display = "none";
      }
    }
    
  </script>
</body>
</html>